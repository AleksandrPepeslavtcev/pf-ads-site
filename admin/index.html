<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PF-ADS</title>
  
  <!-- –ó–∞–≥—Ä—É–∑–∫–∞ Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    
    #cms-container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
      background: white;
    }
    
    .error {
      background: #ffebee;
      color: #c62828;
      padding: 30px;
      border-radius: 10px;
      margin: 40px;
      text-align: center;
      border: 1px solid #ffcdd2;
    }
    
    .error button {
      background: #c62828;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
      font-size: 14px;
    }
    
    .error button:hover {
      background: #b71c1c;
    }
  </style>
</head>
<body>
  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è CMS -->
  <div id="cms-container"></div>

  <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div id="cms-loading" class="loading">
    <h2>üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PF-ADS</h2>
    <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞...</p>
  </div>

  <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–∫–∏ -->
  <div id="cms-error" class="error" style="display: none;">
    <h3>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</h3>
    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:</p>
    <ul style="text-align: left; display: inline-block;">
      <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ GitHub</li>
      <li>–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å callback URL</li>
      <li>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</li>
    </ul>
    <div style="margin-top: 20px;">
      <button onclick="window.location.reload()">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
      <button onclick="checkConfig()">üîß –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
  </div>

  <script>
    function checkConfig() {
      const config = {
        repo: 'AleksandrPepeslavtcev/pf-ads-site',
        branch: 'main',
        baseUrl: 'https://www.pf-ads.com',
        callbackUrl: 'https://www.pf-ads.com/admin/'
      };
      
      alert(`–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub OAuth App:\n\n` +
            `Application name: PF ADS CMS\n` +
            `Homepage URL: ${config.baseUrl}\n` +
            `Authorization callback URL: ${config.callbackUrl}\n\n` +
            `–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ OAuth App —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.`);
    }

    // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    function initializeCMS() {
      console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Decap CMS...');
      
      try {
        // –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã–≤–∞–µ–º loading
        const loadingElement = document.getElementById('cms-loading');
        if (loadingElement) {
          loadingElement.style.display = 'none';
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ CMS –∑–∞–≥—Ä—É–∂–µ–Ω
        if (typeof CMS === 'undefined') {
          throw new Error('CMS –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª—å
        CMS.registerLocale('ru', {
          app: {
            header: {
              content: '–ö–æ–Ω—Ç–µ–Ω—Ç',
              media: '–ú–µ–¥–∏–∞',
              workflow: 'Workflow',
              quickAdd: '–ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ'
            },
            buttons: {
              save: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
              saving: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...',
              delete: '–£–¥–∞–ª–∏—Ç—å',
              uploading: '–ó–∞–≥—Ä—É–∑–∫–∞...'
            }
          }
        });

        console.log('‚úÖ CMS –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é...');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º CMS
        CMS.init({
          config: {
            locale: 'ru'
          }
        });
        
        console.log('‚úÖ CMS —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
        
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ CMS:', error);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
        const loadingElement = document.getElementById('cms-loading');
        const errorElement = document.getElementById('cms-error');
        
        if (loadingElement) loadingElement.style.display = 'none';
        if (errorElement) errorElement.style.display = 'block';
      }
    }

    // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', function() {
      console.log('üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º CMS...');
      
      // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤
      setTimeout(function() {
        if (typeof CMS !== 'undefined') {
          initializeCMS();
        } else {
          console.log('‚è≥ CMS –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∂–¥–µ–º...');
          
          // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å
          const checkInterval = setInterval(function() {
            if (typeof CMS !== 'undefined') {
              clearInterval(checkInterval);
              initializeCMS();
            }
          }, 500);
          
          // –¢–∞–π–º–∞—É—Ç
          setTimeout(function() {
            clearInterval(checkInterval);
            if (typeof CMS === 'undefined') {
              console.error('‚ùå –¢–∞–π–º–∞—É—Ç: CMS –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è');
              document.getElementById('cms-loading').style.display = 'none';
              document.getElementById('cms-error').style.display = 'block';
            }
          }, 10000);
        }
      }, 1000);
    });

    // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üîß DOM –≥–æ—Ç–æ–≤');
    });
  </script>
</body>
</html>
