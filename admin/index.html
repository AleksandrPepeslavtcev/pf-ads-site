<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PF-ADS Content Manager</title>
</head>
<body>
  <div id="root">
    <div style="padding: 40px; text-align: center;">
      <h2>Загрузка редактора PF-ADS...</h2>
      <p id="status">Инициализация системы</p>
    </div>
  </div>

  <script>
    // Пробуем разные источники для загрузки CMS
    const cmsSources = [
      'https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js',
      'https://cdn.jsdelivr.net/npm/decap-cms@3.8.4/dist/decap-cms.js',
      'https://cdnjs.cloudflare.com/ajax/libs/decap-cms/3.8.4/decap-cms.js',
      'https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js'
    ];

    let currentSource = 0;

    function loadCMS() {
      if (currentSource >= cmsSources.length) {
        document.getElementById('status').innerHTML = '❌ Все источники недоступны. Попробуйте позже.';
        return;
      }

      const script = document.createElement('script');
      script.src = cmsSources[currentSource];
      script.onload = function() {
        document.getElementById('status').innerHTML = '✅ CMS загружена, инициализация...';
        if (window.CMS) {
          try {
            CMS.init();
            document.getElementById('status').innerHTML = '✅ CMS успешно запущена!';
          } catch (error) {
            document.getElementById('status').innerHTML = '❌ Ошибка инициализации: ' + error.message;
          }
        }
      };
      script.onerror = function() {
        document.getElementById('status').innerHTML = `❌ Источник ${currentSource + 1} недоступен, пробуем следующий...`;
        currentSource++;
        setTimeout(loadCMS, 1000);
      };
      
      document.head.appendChild(script);
    }

    // Начинаем загрузку
    loadCMS();
  </script>
</body>
</html>
