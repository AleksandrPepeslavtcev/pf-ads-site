<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PF-ADS CMS</title>
</head>
<body>
  <div id="root"></div>

  <!-- –ü—Ä–æ–±—É–µ–º —Å–∞–º—ã–π –±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç -->
  <script src="https://unpkg.com/netlify-cms@2.10.192/dist/netlify-cms.js"></script>
  
  <script>
    // –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º
    setTimeout(function() {
      if (window.CMS) {
        CMS.init();
      } else {
        showManualEditor();
      }
    }, 5000);
    
    function showManualEditor() {
      document.body.innerHTML = `
        <div style="padding: 40px; max-width: 800px; margin: 0 auto;">
          <h1>‚úèÔ∏è PF-ADS –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤</h1>
          <p style="color: #666;">CMS –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä:</p>
          
          <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>üìù –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h3>
            <form id="postForm">
              <div style="margin-bottom: 15px;">
                <label><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</strong></label>
                <input type="text" id="title" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" required>
              </div>
              <div style="margin-bottom: 15px;">
                <label><strong>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (Markdown):</strong></label>
                <textarea id="content" style="width: 100%; height: 300px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace;" required></textarea>
              </div>
              <button type="submit" style="background: #667eea; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
                üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç
              </button>
            </form>
          </div>
          
          <div style="margin-top: 30px;">
            <h3>üìÅ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ—Å—Ç—ã</h3>
            <a href="https://github.com/AleksandrPepeslavtcev/pf-ads-site/tree/main/_posts" target="_blank" style="display: inline-block; padding: 10px 20px; background: #333; color: white; text-decoration: none; border-radius: 4px;">
              üìÇ –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É —Å –ø–æ—Å—Ç–∞–º–∏ –Ω–∞ GitHub
            </a>
          </div>
        </div>
      `;

      document.getElementById('postForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;
        const date = new Date().toISOString().split('T')[0];
        const slug = title.toLowerCase().replace(/[^a-z0-9–∞-—è—ë]+/g, '-').replace(/-+/g, '-').replace(/^-|-$/g, '');
        const filename = `${date}-${slug}.md`;
        
        const postContent = `---
title: "${title}"
date: ${new Date().toISOString()}
---
${content}
`;

        document.body.innerHTML = `
          <div style="padding: 40px; max-width: 800px; margin: 0 auto;">
            <h1>‚úÖ –ü–æ—Å—Ç –≥–æ—Ç–æ–≤!</h1>
            
            <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <h3>üìã –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:</h3>
              <ol>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∏–∂–µ</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="https://github.com/AleksandrPepeslavtcev/pf-ads-site/new/main/_posts" target="_blank">GitHub</a></li>
                <li>–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞: <code>_posts/${filename}</code></li>
                <li>–í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "Commit new file"</li>
              </ol>
            </div>

            <div style="background: #f5f5f5; padding: 15px; border-radius: 4px; margin: 20px 0;">
              <strong>–ò–º—è —Ñ–∞–π–ª–∞:</strong> ${filename}
            </div>

            <textarea style="width: 100%; height: 400px; font-family: monospace; padding: 15px; border: 1px solid #ddd; border-radius: 4px;">${postContent}</textarea>
            
            <div style="margin-top: 20px;">
              <a href="https://github.com/AleksandrPepeslavtcev/pf-ads-site/new/main/_posts" target="_blank" style="display: inline-block; padding: 12px 24px; background: #2ea44f; color: white; text-decoration: none; border-radius: 4px; margin-right: 10px;">
                üìù –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ GitHub
              </a>
              <button onclick="location.reload()" style="padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
                ‚ú® –°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –ø–æ—Å—Ç
              </button>
            </div>
          </div>
        `;
      });
    }
  </script>
</body>
</html>
